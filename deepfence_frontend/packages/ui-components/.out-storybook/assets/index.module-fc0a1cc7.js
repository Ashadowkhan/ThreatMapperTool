import{r as s}from"./index-f1f749bf.js";import{r as A}from"./index-96c5f47c.js";import{$ as P}from"./index.module-6eb1676d.js";function R(e,n=[]){let o=[];function t(u,f){const i=s.createContext(f),a=o.length;o=[...o,f];function r(d){const{scope:l,children:$,...p}=d,b=(l==null?void 0:l[e][a])||i,x=s.useMemo(()=>p,Object.values(p));return s.createElement(b.Provider,{value:x},$)}function m(d,l){const $=(l==null?void 0:l[e][a])||i,p=s.useContext($);if(p)return p;if(f!==void 0)return f;throw new Error(`\`${d}\` must be used within \`${u}\``)}return r.displayName=u+"Provider",[r,m]}const c=()=>{const u=o.map(f=>s.createContext(f));return function(i){const a=(i==null?void 0:i[e])||u;return s.useMemo(()=>({[`__scope${e}`]:{...i,[e]:a}}),[i,a])}};return c.scopeName=e,[t,S(c,...n)]}function S(...e){const n=e[0];if(e.length===1)return n;const o=()=>{const t=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(u){const f=t.reduce((i,{useScope:a,scopeName:r})=>{const d=a(u)[`__scope${r}`];return{...i,...d}},{});return s.useMemo(()=>({[`__scope${n.scopeName}`]:f}),[f])}};return o.scopeName=n.scopeName,o}function _(e,n,{checkForDefaultPrevented:o=!0}={}){return function(c){if(e==null||e(c),o===!1||!c.defaultPrevented)return n==null?void 0:n(c)}}function h(e){const n=s.useRef(e);return s.useEffect(()=>{n.current=e}),s.useMemo(()=>(...o)=>{var t;return(t=n.current)===null||t===void 0?void 0:t.call(n,...o)},[])}function y({prop:e,defaultProp:n,onChange:o=()=>{}}){const[t,c]=C({defaultProp:n,onChange:o}),u=e!==void 0,f=u?e:t,i=h(o),a=s.useCallback(r=>{if(u){const d=typeof r=="function"?r(e):r;d!==e&&i(d)}else c(r)},[u,e,c,i]);return[f,a]}function C({defaultProp:e,onChange:n}){const o=s.useState(e),[t]=o,c=s.useRef(t),u=h(n);return s.useEffect(()=>{c.current!==t&&(u(t),c.current=t)},[t,c,u]),o}const N=Boolean(globalThis==null?void 0:globalThis.document)?s.useLayoutEffect:()=>{};function M(e,n){return s.useReducer((o,t)=>{const c=n[o][t];return c??o},e)}const E=e=>{const{present:n,children:o}=e,t=T(n),c=typeof o=="function"?o({present:t.isPresent}):s.Children.only(o),u=P(t.ref,c.ref);return typeof o=="function"||t.isPresent?s.cloneElement(c,{ref:u}):null};E.displayName="Presence";function T(e){const[n,o]=s.useState(),t=s.useRef({}),c=s.useRef(e),u=s.useRef("none"),f=e?"mounted":"unmounted",[i,a]=M(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const r=v(t.current);u.current=i==="mounted"?r:"none"},[i]),N(()=>{const r=t.current,m=c.current;if(m!==e){const l=u.current,$=v(r);e?a("MOUNT"):$==="none"||(r==null?void 0:r.display)==="none"?a("UNMOUNT"):a(m&&l!==$?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,a]),N(()=>{if(n){const r=d=>{const $=v(t.current).includes(d.animationName);d.target===n&&$&&A.flushSync(()=>a("ANIMATION_END"))},m=d=>{d.target===n&&(u.current=v(t.current))};return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}else a("ANIMATION_END")},[n,a]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:s.useCallback(r=>{r&&(t.current=getComputedStyle(r)),o(r)},[])}}function v(e){return(e==null?void 0:e.animationName)||"none"}export{R as $,_ as a,E as b,N as c,y as d,h as e};
//# sourceMappingURL=index.module-fc0a1cc7.js.map
